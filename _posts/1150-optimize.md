---
categories: Webmaster
date: 2012/08/12 15:25:00
title: Три способа ускорить загрузку вашего сайта
tags: минимализм, идиотизм, Ubuntu
description: Три простых способа оптимизировать загрузку вашего сайта, если вы используете Linux для разработки
---
<img class="alignleft size-thumbnail" width="150" height="150" alt="" src="/uploads/speed.jpg" title="оптимизировать загрузку сайта">
[toc]Зачем оптимизировать загрузку сайта, думаю понятно. Посетители будут меньше ждать, а вы сэкономите трафик. Сегодня я расскажу про три простых способа ускорить загрузку вашего сайта, *если вы используете Linux для разработки*. Теоретически данные утилиты можно запустить и под Windows.

Для проверки скорости загрузки сайта (что-бы сравнить результаты до и после) рекомендую использовать [Pingdom Tools][p]. 

Чтобы автоматизировать оптимизацию, все будем делать через консоль. Для начала установим необходимые утилиты:
[code lang='bash']
sudo apt-get install uglifyjs trimage
#cssoptimizer
wget --content-disposition http://mabblog.com/getfile.php?file=37
sudo tar -xvf cssoptimizer_linux.tgz -C /usr/bin ./cssoptimizer
[/code]

Ну а теперь давайте разбираться что же мы только что установили :)

## Uglifyjs - сжимаем JavaScript

Существует множество оптимизаторов и обсуфикаторов для JavaScript. По своему опыту меньше всего проблем с [uglifyjs][u]. Не разу не встречал чтобы оптимизированный им код перестал работать. Плюс он еще и проверяет код на случай если вы допустили синтаксическую ошибку. Удобно, если вы как я пишете JavaScript в текстовом редакторе а не IDE.

Когда вы пишете код, удобно разделять функционал по разным js файлам. А чтобы уменьшить количество запросов к сайту также рекомендуется склеить все файлы в один. Это делается стандартной Linux утилитой `cat`. После чего вывод перенаправляется в uglifyjs. Результат сохраняется в файл script.js. Например данная команда склеивает и оптимизирует все скриты из папки `_js` и сохраняет результат `script.js` в папке `_output`.

[code lang='bash']
cat _js/*.js | uglifyjs -nc > _output/script.js
[/code]

Если ваши скрипты зависят друг от друга - пронумеруйте их, например: `01_functions.js`, `02_main.js`. Склеивать в один файл фреймворки типа [jQuery][j] не рекомендуется, потому что все современные браузеры и так умеют их кешировать.

## Cssoptimizer - сжимаем CSS

[Cssoptimizer][c] как очевидно из названия, позволяет сжимать css. Тут та же история что и с js - желательно склеить все CSS'ки в 1 файл. Для сохранения иерархии - пронумеруйте файлы, например: `01_base.css`, `02_site.css`.

[code lang='bash']
cat _css/*.css | cssoptimizer -i -o > _output/style.css
[/code]

## Trimage - Оптимизируем png
Я часто слышу миф что png это looseless формат и уменьшить его размер без потери качества нельзя. Это таки миф, потому что замечательная програмка [Trimage][t], позволяет облегчить PNG'шку в среднем на 30% сохраняя исходный внешний вид. Заодно программа оптимизирует и <span style="text-decoration:line-through">джипики</span> JPEG'и.

Trimage можно натравливать на папку с изображением. Работает она достаточно долго, поэтому рекомендую запускать ее только для новых изображений.
[code lang='bash']
trimage -f _images
[/code]

##Заключение

Вы можете добавить эти команды в 1 скрипт ([пример][b]) и прогонять его каждый раз когда загружаете сайт на хостинг. С использованием данных утилит, этот блог стал грузиться примерно на 20% быстрее.

**PS**: Так-же значительно ускорить загрузку сайта поможет [Cloudflare CDN][c].

**PS**: И еще важный совет по оптимизации загрузки сайта: не забудьте асинхронно загружать [кнопки социальных сетей][y]. Я из за этого особенно страдаю - на работе не грузиться кнопка Google Plus, а вместе с ней куча сайтов, где вебмастеры добавляют ее установку в `<header>`.

[y]: http://thexnews.com/%D0%BA%D0%BD%D0%BE%D0%BF%D0%BA%D0%B8-%D1%81%D0%BE%D1%86%D1%81%D0%B5%D1%82%D0%B5%D0%B9-%D0%BE%D1%82-%D0%AF%D0%BD%D0%B4%D0%B5%D0%BA%D1%81%D0%B0.html
[p]: http://tools.pingdom.com/fpt/ "проверить скорость загрузки сайта"
[b]: https://github.com/dmi3/thexnews.com/blob/master/build.sh
[u]: https://github.com/mishoo/UglifyJS/ "уменьшить офмфыскшзе оптимизация ubuntu "
[t]: http://trimage.org/ "сжатие png ubuntu"
[c]: http://mabblog.com/cssoptimizer/ "ubuntu уменьшить css оптимизация"
[j]: http://jquery.com/ "jquery уменьшить размер Ubuntu"
[j]: http://thexnews.com/ "Блог про Софт, Интернет, Ubuntu Linux"
[c]: http://thexnews.com/ускоряем-загрузку-сайта-cloudflare-cdn.html
