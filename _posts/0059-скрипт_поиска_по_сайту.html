---
categories: Интернет
date: 2007/09/02 01:56:47
description: ''
permalink: http://thexnews.com/скрипт-поиска-по-сайту.html
tags: создание сайтов, Wordpress, скачать, поиск, Яндекс, php скрипт
title: Скрипт поиска по Сайту
---
<p>У движка <a href="http://wordpress.org/">Wordpress</a> - отвратительный поиск. Авторы видимо понадеялись на плагин-мейкеров, но те ничего путного так и не сделали. (Во всяком случае для русской орфографии). Если не верите, можете попробовать ввести в поиск запросы, по которым люди попадают на ваш сайт. С любыми плагинами, в большинстве случаев будет: "Sorry, no posts matched your criteria."</p>

<p>Вообще нормальный скрипт поиска - очень сложная штука, т.к необходимо перебирать все формы слова и.т.д. Но тут приходит разумная мысль: зачем мудрить, когда существуют такие поисковые монстры как <a href="http://google.com">Google</a> и <a href="http://yandex.ru">Яндекс</a>? Остается их просто аккуратно прикрутить к сайту. Далее расскажу, <em>как не просто повесить окошко их поиска</em>, а <strong>"встроить"</strong> поисковик  в структуру сайта.<!--more--></p>

<p>У <a href="http://www.google.com/coop/cse/?hl=ru" title="поиск по сайту">Google</a> такая штука идет в комплекте с рекламой, и возможностей у нее мало. Поэтому работать будем с Яндексом. Тем более, что они даже специальный сервис для интеграции сделали. <a href="http://xml.yandex.ru/">Яндекс.XML</a> называется. Итак.
<ul>
	<li>Этот способ дает возможность выводить результаты поиска на <span style="font-weight: bold;">вашем</span> сайте в соответствии с <span style="font-weight: bold;">вашим</span> дизайном, и <span style="font-weight: bold;">без лишнего</span>.</li>
	<li>Ваш сайт должен быть проиндексирован Яндексом.</li>
	<li> Ограничение на 1000 поисков в день.</li>
	<li> Хостинг должен поддерживать удаленное открытие файлов, и PHP.</li>
	<li><span style="text-decoration: underline;"><strong>Скрипт идет с подробными комментариями.</strong></span></li>
</ul>
<strong>Установка</strong></p>

<p>Заливаем на хостинг скрипт, изменяем его под сайт, и запускаем. Видим что с ip такого-то поиск запрещен. Копируем ip. Заходим <a href="http://xml.yandex.ru/ip.xml">сюда</a>, регистрируемся и вводим это ip. Если выходит ошибка, придется требовать у хостера сменить ip.
Теперь с <strong>yandex_search.php, </strong>можно сделать <strong>include() </strong>в ваш сайт<strong>. </strong>Примерное использование, смотрите в <strong>example.html. </strong>Собственно все.</p>

<p><strong>Интеграция в Wordpress </strong></p>

<p>Рассмотрим очень грубый зато универсальный способ.
<ul>
	<li>Залейте скрипт в папку с текущей темой (что то типа <strong>wp-content/themes/название_темы/</strong>)</li>
	<li>В скрипте замените: [code lang='php']$query_=$HTTP_POST_VARS['searchstr'];[/code]
На: [code] $query_=urlencode($s);[/code]
<em>(В Wordpress искомое, всегда находитья в переменной $s.)</em></li>
	<li>Выполните вышеописанные манипуляции с ip</li>
	<li>В папке c темой, в самый конец <strong>header.php</strong>
после:  [code lang="html"] &lt;div id=content&gt; [/code] добавьте: [code lang='php']< ?php if ($s!="") {include("yandex_search.php");} ?> [/code] <em> </em></li>
</ul>
Это будет выводить результаты яндекса перед обычной поисковой выдачей. Можете проверить поиск на моем сайте (<a href="http://thexnews.com/">theXnews.com</a>), в правом верхнем углу. Когда будет время постараюсь сделать полноценный плагин для Wordpress.</p>

<p><code>[download#11#image]</code></p>