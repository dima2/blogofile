---
categories: Solutions
date: 2008/02/21 00:53:24
description: ''
permalink: http://thexnews.com/проблема-access-denied-у-файлов-vista.html
tags: Vista, old, Windows XP, Solutions, Access Denied, проблемы, permissions
title: Проблема Access Denied у файлов Vista
---
<p>Только что научился решать одну мерзкую проблему с<strong> permissions</strong>, у Windows'ов. Надо записать пока не забыл.</p>

<p>Суть в том что, некоторые файлы Windows Vista можно удалить только из нее самой. Вернее, такие права есть только у юзера-владельца файла. А зайти за этого юзера, не всегда есть возможность.</p>

<p>Приведу конкретный пример. Сегодня притащили ноутбук, с грубо установленной XP'шкой. Раньше там была Vista, и от нее остались разжиревшие папки "Windows" (аж 15 гигов!)  и "Program Files". При попытке их удалить из XP, вылезал error <strong>Access Denied</strong>. В Vist'у зайти, как вы понимаете, не было возможности. Диск полностью забит нужными файлами, так что format c: тоже бы не прокатил. Пришлось разбираться<!--more--></p>

<p>Сначала я включил продвинутые настройки Permissions (как у Win2003):
<ul>
	<li>"Control Panel" -&gt; "Folder Options" -&gt; убрал птичку "Use simple file sharing...".</li>
</ul>
В Properties'ах папок появился пункт Security. Его и нужно изменять для проблемных папок. Для начала я их захватил  :smile: , т.е стал их owner'ом:
<ul>
	<li>"Advanched" -&gt; вкладка "Owner", выбрал текущего пользователя, поставил галку "Replace owner on...". Apply заняло длительное время.</li>
</ul>
Владельцом этих папок я стал, только вот прав изменять их у меня все равно не было. Почему-то в настройках нельзя изменить права сразу для всего содержимого папки "Windows". А проставлять их для каждого - титанический труд.  Долго искал решение, в итоге помогла консольная комманда:</p>

<p>[code]cacls "<strong><span style="color: #0000ff;">C:\path</span></strong>" /t /e /g <strong><span style="color: #ff0000;">Username</span></strong>:F[/code]</p>

<p>Тоже выполнялась довольно долго.  Зато теперь, я мог изменять, а главное удалить эти папки.</p>